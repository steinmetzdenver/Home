<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
<!--     note - use https://drive.google.com/uc?export=view&id=    then up to /view -->
     <script src="https://drive.google.com/uc?export=view&id=18IaWI5kcZx8jYY2FeqVEfdGqeqs_wJ5h"></script> 
     <link rel="stylesheet" type="text/css" href="newShoppingCss.css">
    <title>Produce Items</title>
</head>
<body>
  <h1>Produce</h1>
  <div id="shop-page">
    <div id="page-container">
            <div id="item-list">
            </div>
            <div  id="shopping-cart-list">
              <div id="shopping-cart">
                  <h3 >Your Shopping Cart</h3>
                  <hr id="fancy-line"></hr>
              </div>
              <div id="cart-total">
                <hr style="border-top: 1px solid #333;margin-right:10px"></hr>
                <span>Total Purchase: $</span><span id="total-purchase"></span>
                <div id="test-div"></div>
                <!--***********google form container****** -->
                <div class="form-container">
                    <form name="gform" id="gform" enctype="text/plain"  action="https://docs.google.com/forms/d/e/1FAIpQLSc7rtVng25ALoFQW1Hd51N0UKsTcBIVFKQL03i5NHLj5NYocg/formResponse?" target="hidden_iframe" >
                      First Name:<br>
                      <input type="text" name="entry.2005620554" id="entry.2005620554" style="width:200px" placeholder="Enter your first name" required><br>
                      Last Name:<br>
                      <input type="text" name="entry.1610227697" id="entry.1610227697" style="width:250px" placeholder="Enter your last name" required><br>
                      Email:<br>
                      <input type="email" name="entry.1045781291" id="entry.1045781291" style="width:300px" placeholder="Enter your email address" required><br>
                      Shipping Address:<br>
                      <input type="text" name="entry.1065046570" id="entry.1065046570" style="width:600px" placeholder="Enter your shipping address" required><br>
                      Phone:<br>
                      <input type="number" name="entry.1166974658" id="entry.1166974658" style="width:200px" placeholder="Enter your phone number" required><br>
                      <textarea style="display:none" name="entry.839337160" id="entry.839337160" ></textarea><br>
                      <script>
                           function doFade(){
                              let name = document.getElementById("entry.2005620554").value.toUpperCase(); 
                                document.getElementById("gform").style="display:none";
                              document.getElementById("response").innerHTML = '<h2 style="text-align:center"> Thank you ' + name + ', you will receive an email invoice with shipping costs applied shortly. <h2>';
                        }  
                        function getPurchaseSummary(){
                          let cartRows = document.getElementsByClassName("cart-item-row")[0];
                          let price="";
                          let quantity="";
                          let description="";
                          let itemID="";
                          let priceObj = {};
                          let priceArray = [];
                          let totalSaleObj = {};
                          for (let i=0;i<cartRows.length;i++)
                              {   
                                  let cartRow = cartRows[i];
                                  price = cartRow.getElementsByClassName("cart-price")[0].innerText;
                                  quantity = cartRow.getElementsByClassName("quantity")[0].value;
                                  description = cartRow.getElementsByClassName("cart-item-description")[0].innerText;
                                  itemID = cartRow.getElementsByClassName("cart-item-id")[0].innerText;
                                  priceObj = {ID:itemID,Description:description,Quantity:quantity,price:price}
                                  priceArray.push(priceObj);
                            }
                            let totalPrice = document.getElementById("total-purchase").innerText;
                            totalSaleObj = {TotalSale:totalPrice};
                            priceArray.push(totalSaleObj);
                            let sendStr = JSON.stringify(priceArray);
                            document.getElementsByTagName("textarea").innerText = sendStr;
                             setTimeout(doFade(),4000); 
                         }
                      </script>
                      <input type="submit" value="Request Invoice" onclick="getPurchaseSummary()">
                    </form>
                </div>
                <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>
                <div id="response"></div>
                <!--*********** end google form container****** -->
              </div>
            </div>
             <script src="newProduceScript.js"></script> 
    </div> 
  </div>
    <!-- End Shop Page -->
</body>
</html>
